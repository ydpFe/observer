<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>状态模式</title>
    <script type="text/javascript">
 
    </script>
    <style>
    </style>
</head>

<body>

<script>
    var MarryState=function(){
        var _message={},
            states={
                jump:function(){
                    console.log("jump");
                },
                move:function(){
                    console.log("move");
                },
                shoot:function(){
                    console.log("shoot");
                }
            };
        var Action={
            changeState:function(){
                var arg=arguments;
                _message={};//清空
                if(arg.length!=0){
                    for(var i in arg){
                        _message[arg[i]]=true;
                    }
                }
                return this;
            },
            goes:function(){
                console.log("触发一次动作");
                for(var i in _message){
                    states[i] && states[i]();
                }
                return this;
            }
        }
        return{
            change:Action.changeState,
            goes:Action.goes
        }
    }
    var marry=new MarryState();
    marry
        .change("jump")
        .goes()
        .change("shoot")
        .goes()
</script>
</body>

</html>